<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canadian Credit Card Scraper & Analyzer</title>
    <!-- Include your main CSS -->
    <link rel="stylesheet" href="css/styles.css">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <!-- Plotly.js for visualizations -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <section id="sql-project" class="data-science-section reveal-on-scroll">
        <h2 class="glitch" data-text="TEST//SCRAPER">TEST//SCRAPER</h2>
        <h3 class="cyber-subtitle">Canadian Credit Card Intelligence Engine</h3>
        
        <div class="project-container">
            <div class="data-project-card">
                <h3>Automated Web Scraping & Rewards Analysis System</h3>
                
                <div class="scraper-status-panel">
                    <div class="status-indicator active">
                        <span class="status-dot"></span>
                        <span class="status-text">SCRAPER READY</span>
                    </div>
                    <div class="status-controls">
                        <button class="micro-button" onclick="toggleScraperLog()">View Log</button>
                        <button class="micro-button" onclick="resetScraper()">Reset</button>
                    </div>
                    <div class="last-update">Last update: <span id="last-update-time">Never</span></div>
                </div>
                
                <div class="project-content">
                    <div class="feature-list">
                        <h4>Scraping Capabilities:</h4>
                        <ul>
                            <li><i class="fas fa-spider"></i> <span>Multi-Site Data Extraction</span></li>
                            <li><i class="fas fa-sync-alt"></i> <span>Weekly Auto-Updates</span></li>
                            <li><i class="fas fa-robot"></i> <span>Intelligent Data Normalization</span></li>
                            <li><i class="fas fa-shield-alt"></i> <span>Proxy Rotation & Headers</span></li>
                        </ul>
                    </div>
                    
                    <div class="scraper-config-panel">
                        <h4>Scraper Configuration</h4>
                        <div class="config-grid">
                            <div class="config-column">
                                <h5>Target Sources</h5>
                                <div class="source-toggles">
                                    <div>
                                        <input type="checkbox" id="source-ratehub" checked>
                                        <label for="source-ratehub">RateHub.ca</label>
                                    </div>
                                    <div>
                                        <input type="checkbox" id="source-creditcardgenius" checked>
                                        <label for="source-creditcardgenius">CreditCardGenius</label>
                                    </div>
                                    <div>
                                        <input type="checkbox" id="source-greedyrates" checked>
                                        <label for="source-greedyrates">GreedyRates</label>
                                    </div>
                                    <div>
                                        <input type="checkbox" id="source-pointshacks">
                                        <label for="source-pointshacks">PointsHack.ca</label>
                                    </div>
                                    <div>
                                        <input type="checkbox" id="source-moneysense">
                                        <label for="source-moneysense">MoneySense</label>
                                    </div>
                                </div>
                            </div>
                            <div class="config-column">
                                <h5>Data Points</h5>
                                <div class="data-toggles">
                                    <div>
                                        <input type="checkbox" id="data-welcome" checked>
                                        <label for="data-welcome">Welcome Bonuses</label>
                                    </div>
                                    <div>
                                        <input type="checkbox" id="data-cashback" checked>
                                        <label for="data-cashback">Cashback Rates</label>
                                    </div>
                                    <div>
                                        <input type="checkbox" id="data-points" checked>
                                        <label for="data-points">Points Multipliers</label>
                                    </div>
                                    <div>
                                        <input type="checkbox" id="data-insurance" checked>
                                        <label for="data-insurance">Insurance Benefits</label>
                                    </div>
                                    <div>
                                        <input type="checkbox" id="data-income">
                                        <label for="data-income">Income Requirements</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="scraper-actions">
                            <button class="cyber-button small" onclick="runScraper()">
                                <span class="button-text">RUN_SCRAPER</span>
                            </button>
                            <div class="scraper-options">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="use-cache">
                                    <span class="slider"></span>
                                    <span class="toggle-label">Use Cache</span>
                                </label>
                                <select id="scrape-depth">
                                    <option value="1">Basic (Fast)</option>
                                    <option value="2" selected>Standard</option>
                                    <option value="3">Deep (Slow)</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="scraper-log" id="scraper-log">
                        <div class="log-header">
                            <span>Scraper Log</span>
                            <button class="micro-button" onclick="clearLog()">Clear</button>
                        </div>
                        <div class="log-content">
                            <div class="log-entry">[System] Scraper initialized...</div>
                            <div class="log-entry">[Config] Target sites loaded: 3 active</div>
                            <div class="log-entry">[Config] Data points configured: 4 active</div>
                            <div class="log-entry">[Ready] Waiting for execution...</div>
                        </div>
                    </div>
                    
                    <div class="visualization-container">
                        <div id="welcome-bonus-plot" class="plot-box"></div>
                        <div id="rewards-comparison-plot" class="plot-box"></div>
                    </div>
                    
                    <!-- Add data table container for scraped data -->
                    <div id="scraped-data-container" class="scraped-data-container">
                        <div class="data-table-header">
                            <h4>Scraped Credit Card Data</h4>
                            <div class="table-controls">
                                <button class="micro-button" onclick="exportTableToCSV()">Export CSV</button>
                                <button class="micro-button" onclick="toggleDataTable()">Close</button>
                            </div>
                        </div>
                        <div class="data-table-wrapper">
                            <table id="scraped-data-table" class="scraped-data-table">
                                <thead>
                                    <tr>
                                        <th>Card Name</th>
                                        <th>Issuer</th>
                                        <th>Annual Fee</th>
                                        <th>Welcome Bonus</th>
                                        <th>Grocery Rate</th>
                                        <th>Gas Rate</th>
                                        <th>Dining Rate</th>
                                        <th>Travel Rate</th>
                                        <th>Base Rate</th>
                                        <th>Insurance</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Table will be populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="interactive-panel">
                        <h4>Card Comparison Matrix</h4>
                        <div class="input-grid">
                            <div class="input-group">
                                <label for="annual-income">Annual Income (CAD)</label>
                                <input type="range" id="annual-income" min="30000" max="150000" step="10000" value="60000">
                                <output for="annual-income">$60,000</output>
                            </div>
                            <div class="input-group">
                                <label for="province">Province</label>
                                <select id="province">
                                    <option value="ON">Ontario</option>
                                    <option value="BC">British Columbia</option>
                                    <option value="AB">Alberta</option>
                                    <option value="QC">Quebec</option>
                                    <option value="MB">Manitoba</option>
                                    <option value="NS">Nova Scotia</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label>Monthly Spending ($)</label>
                                <div class="spending-inputs">
                                    <div>
                                        <label for="groceries">Groceries</label>
                                        <input type="number" id="groceries" value="500" min="0">
                                    </div>
                                    <div>
                                        <label for="dining">Dining</label>
                                        <input type="number" id="dining" value="300" min="0">
                                    </div>
                                    <div>
                                        <label for="gas">Gas</label>
                                        <input type="number" id="gas" value="200" min="0">
                                    </div>
                                    <div>
                                        <label for="travel">Travel</label>
                                        <input type="number" id="travel" value="150" min="0">
                                    </div>
                                    <div>
                                        <label for="other">Other</label>
                                        <input type="number" id="other" value="500" min="0">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button class="cyber-button" onclick="analyzeCards()">
                            <span class="button-text">ANALYZE_CARDS</span>
                        </button>
                    </div>
                </div>
                
                <div class="project-actions">
                    <button class="cyber-button" onclick="window.location.href='https://github.com/yourusername/canadian-cc-scraper'">
                        <span class="button-text">VIEW_SOURCE</span>
                    </button>
                    <button class="cyber-button" onclick="toggleDataTable()">
                        <span class="button-text">VIEW_RAW_DATA</span>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- JavaScript for interactive scraper functionality -->
    <script>
        // Variables to track scraper state
        let isScraperRunning = false;
        
        // Update slider output
        document.getElementById('annual-income').addEventListener('input', function() {
            document.querySelector('output[for="annual-income"]').textContent = `$${this.value.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")}`;
        });
        
        // Toggle scraper log visibility
        function toggleScraperLog() {
            const log = document.getElementById('scraper-log');
            log.classList.toggle('expanded');
        }
        
        // Clear the scraper log
        function clearLog() {
            const logContent = document.querySelector('.log-content');
            logContent.innerHTML = '<div class="log-entry">[System] Log cleared</div>';
        }
        
        // Reset the scraper status
        function resetScraper() {
            isScraperRunning = false;
            document.querySelector('.status-indicator').classList.remove('running');
            document.querySelector('.status-indicator').classList.remove('success');
            document.querySelector('.status-indicator').classList.add('active');
            document.querySelector('.status-text').textContent = 'SCRAPER READY';
            
            clearLog();
            addLogEntry('[System] Scraper reset complete');
            addLogEntry('[Config] Target sites loaded: 3 active');
            addLogEntry('[Config] Data points configured: 4 active');
            addLogEntry('[Ready] Waiting for execution...');
            
            // Hide the plots
            document.getElementById('welcome-bonus-plot').classList.remove('active');
            document.getElementById('rewards-comparison-plot').classList.remove('active');
            
            // Hide the data table
            document.getElementById('scraped-data-container').classList.remove('visible');
        }
        
        // Add entry to log
        function addLogEntry(message) {
            const logContent = document.querySelector('.log-content');
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            entry.textContent = message;
            logContent.appendChild(entry);
            logContent.scrollTop = logContent.scrollHeight;
        }
        
        // Run the scraper simulation
        function runScraper() {
            if (isScraperRunning) {
                addLogEntry('[Warning] Scraper already running');
                return;
            }
            
            isScraperRunning = true;
            document.querySelector('.status-indicator').classList.add('running');
            document.querySelector('.status-text').textContent = 'SCRAPER RUNNING';
            
            // Show the scraper log
            document.getElementById('scraper-log').classList.add('visible');
            
            // Clear existing log
            clearLog();
            
            // Get configuration options
            const useCache = document.getElementById('use-cache').checked;
            const scrapeDepth = document.getElementById('scrape-depth').value;
            const sources = [];
            if (document.getElementById('source-ratehub').checked) sources.push('RateHub.ca');
            if (document.getElementById('source-creditcardgenius').checked) sources.push('CreditCardGenius');
            if (document.getElementById('source-greedyrates').checked) sources.push('GreedyRates');
            if (document.getElementById('source-pointshacks').checked) sources.push('PointsHack.ca');
            if (document.getElementById('source-moneysense').checked) sources.push('MoneySense');
            
            // Start scraping simulation
            addLogEntry(`[System] Starting scraper with depth ${scrapeDepth}`);
            addLogEntry(`[Config] Cache ${useCache ? 'enabled' : 'disabled'}`);
            addLogEntry(`[Config] Sources: ${sources.join(', ')}`);
            
            // Simulate data extraction
            sources.forEach((source, index) => {
                setTimeout(() => {
                    addLogEntry(`[Scraper] Starting extraction from ${source}`);
                    setTimeout(() => {
                        const cardCount = Math.floor(Math.random() * 20) + 10;
                        addLogEntry(`[Scraper] Extracted ${cardCount} cards from ${source}`);
                    }, 1000);
                }, index * 1500);
            });
            
            // Final processing
            setTimeout(() => {
                addLogEntry('[Processor] Normalizing scraped data');
                addLogEntry('[Processor] Consolidating reward structures');
                
                setTimeout(() => {
                    addLogEntry('[Processor] Data normalization complete');
                    addLogEntry('[Database] Storing results in SQLite database');
                    
                    // Complete the process
                    setTimeout(() => {
                        completeScrapingProcess();
                    }, 1000);
                }, 2000);
            }, sources.length * 1500 + 1000);
        }
        
        // Complete the scraping process
        function completeScrapingProcess() {
            isScraperRunning = false;
            document.querySelector('.status-indicator').classList.remove('running');
            document.querySelector('.status-indicator').classList.add('success');
            document.querySelector('.status-text').textContent = 'SCRAPER COMPLETE';
            
            // Update last update time
            const now = new Date();
            document.getElementById('last-update-time').textContent = now.toLocaleString();
            
            addLogEntry('[System] Scraping process complete');
            
            // Simulate card analysis
            addLogEntry('[Analysis] Running card comparison analysis');
            setTimeout(() => {
                addLogEntry('[Analysis] Analysis complete');
                
                // Generate sample plots based on "scraped" data
                generateWelcomeBonusPlot();
                generateRewardsComparisonPlot();
                
                // Display the scraped data table
                populateDataTable();
                showScrapedDataTable();
                
                document.querySelector('.status-indicator').classList.remove('success');
                document.querySelector('.status-indicator').classList.add('active');
                document.querySelector('.status-text').textContent = 'SCRAPER READY';
            }, 1500);
        }
        
        // Function to populate the data table with scraped credit card information
        function populateDataTable() {
            const tableBody = document.querySelector('#scraped-data-table tbody');
            tableBody.innerHTML = ''; // Clear existing data
            
            // Sample credit card data (in a real app, this would come from the scraper)
            const creditCardData = [
                {
                    name: 'TD Aeroplan Visa Infinite',
                    issuer: 'TD Bank',
                    annualFee: '$139',
                    welcomeBonus: '50,000 points ($425)',
                    groceryRate: '1.5%',
                    gasRate: '1.5%',
                    diningRate: '1.5%',
                    travelRate: '3%',
                    baseRate: '1%',
                    insurance: 'Comprehensive'
                },
                {
                    name: 'CIBC Aventura Visa Infinite',
                    issuer: 'CIBC',
                    annualFee: '$120',
                    welcomeBonus: '35,000 points ($350)',
                    groceryRate: '1.5%',
                    gasRate: '1.5%',
                    diningRate: '2%',
                    travelRate: '2%',
                    baseRate: '1%',
                    insurance: 'Good'
                },
                {
                    name: 'American Express Gold Rewards',
                    issuer: 'American Express',
                    annualFee: '$250',
                    welcomeBonus: '60,000 points ($500)',
                    groceryRate: '2%',
                    gasRate: '2%',
                    diningRate: '2%',
                    travelRate: '3%',
                    baseRate: '1%',
                    insurance: 'Excellent'
                },
                {
                    name: 'RBC Avion Visa Infinite',
                    issuer: 'RBC',
                    annualFee: '$120',
                    welcomeBonus: '35,000 points ($350)',
                    groceryRate: '1%',
                    gasRate: '1%',
                    diningRate: '1%',
                    travelRate: '2%',
                    baseRate: '1%',
                    insurance: 'Good'
                },
                {
                    name: 'Scotiabank Passport Visa Infinite',
                    issuer: 'Scotiabank',
                    annualFee: '$139',
                    welcomeBonus: '40,000 points ($400)',
                    groceryRate: '2%',
                    gasRate: '1%',
                    diningRate: '2%',
                    travelRate: '2%',
                    baseRate: '1%',
                    insurance: 'Very Good'
                },
                {
                    name: 'BMO World Elite Mastercard',
                    issuer: 'BMO',
                    annualFee: '$150',
                    welcomeBonus: '30,000 points ($300)',
                    groceryRate: '3%',
                    gasRate: '3%',
                    diningRate: '3%',
                    travelRate: '3%',
                    baseRate: '1%',
                    insurance: 'Good'
                },
                {
                    name: 'MBNA Rewards World Elite',
                    issuer: 'MBNA',
                    annualFee: '$120',
                    welcomeBonus: '25,000 points ($250)',
                    groceryRate: '2%',
                    gasRate: '2%',
                    diningRate: '2%',
                    travelRate: '2%',
                    baseRate: '1%',
                    insurance: 'Basic'
                },
                {
                    name: 'Neo Financial Mastercard',
                    issuer: 'Neo Financial',
                    annualFee: '$0',
                    welcomeBonus: '$150 cashback',
                    groceryRate: '4%',
                    gasRate: '2%',
                    diningRate: '4%',
                    travelRate: '1%',
                    baseRate: '1%',
                    insurance: 'Limited'
                },
                {
                    name: 'American Express SimplyCash Preferred',
                    issuer: 'American Express',
                    annualFee: '$99',
                    welcomeBonus: '$300 cashback',
                    groceryRate: '2%',
                    gasRate: '2%',
                    diningRate: '2%',
                    travelRate: '2%',
                    baseRate: '2%',
                    insurance: 'Good'
                },
                {
                    name: 'PC Financial World Elite Mastercard',
                    issuer: 'PC Financial',
                    annualFee: '$0',
                    welcomeBonus: '20,000 PC points ($200)',
                    groceryRate: '3%',
                    gasRate: '3%',
                    diningRate: '1%',
                    travelRate: '1%',
                    baseRate: '1%',
                    insurance: 'Basic'
                },
                {
                    name: 'Tangerine Money-Back Credit Card',
                    issuer: 'Tangerine',
                    annualFee: '$0',
                    welcomeBonus: '$100 cashback',
                    groceryRate: '2%',
                    gasRate: '2%',
                    diningRate: '2%',
                    travelRate: '0.5%',
                    baseRate: '0.5%',
                    insurance: 'None'
                },
                {
                    name: 'Rogers World Elite Mastercard',
                    issuer: 'Rogers Bank',
                    annualFee: '$0',
                    welcomeBonus: '$75 cashback',
                    groceryRate: '1.5%',
                    gasRate: '1.5%',
                    diningRate: '1.5%',
                    travelRate: '3%',
                    baseRate: '1.5%',
                    insurance: 'Limited'
                }
            ];
            
            // Add rows to the table with a staggered animation effect
            creditCardData.forEach((card, index) => {
                const row = document.createElement('tr');
                row.style.animationDelay = `${index * 0.1}s`;
                
                row.innerHTML = `
                    <td>${card.name}</td>
                    <td>${card.issuer}</td>
                    <td>${card.annualFee}</td>
                    <td>${card.welcomeBonus}</td>
                    <td>${card.groceryRate}</td>
                    <td>${card.gasRate}</td>
                    <td>${card.diningRate}</td>
                    <td>${card.travelRate}</td>
                    <td>${card.baseRate}</td>
                    <td>${card.insurance}</td>
                `;
                
                tableBody.appendChild(row);
            });
            
            // Add glitch effect to random cells periodically
            setInterval(() => {
                const cells = document.querySelectorAll('#scraped-data-table td');
                const randomCell = cells[Math.floor(Math.random() * cells.length)];
                randomCell.classList.add('cell-glitch');
                setTimeout(() => {
                    randomCell.classList.remove('cell-glitch');
                }, 500);
            }, 2000);
        }
        
        // Function to show the scraped data table
        function showScrapedDataTable() {
            const dataContainer = document.getElementById('scraped-data-container');
            dataContainer.classList.add('visible');
            addLogEntry('[Data] Displaying scraped credit card data');
        }
        
        // Function to toggle the data table visibility
        function toggleDataTable() {
            const dataContainer = document.getElementById('scraped-data-container');
            dataContainer.classList.toggle('visible');
        }
        
        // Function to export table data to CSV
        function exportTableToCSV() {
            const table = document.getElementById('scraped-data-table');
            const rows = table.querySelectorAll('tr');
            
            let csv = [];
            for (let i = 0; i < rows.length; i++) {
                const row = [], cols = rows[i].querySelectorAll('td, th');
                
                for (let j = 0; j < cols.length; j++) {
                    // Replace any commas in the cell content with spaces to avoid CSV issues
                    let data = cols[j].innerText.replace(/,/g, ' ');
                    // Wrap the data in quotes to handle any special characters
                    row.push('"' + data + '"');
                }
                
                csv.push(row.join(','));
            }
            
            // Create CSV file and download
            const csvContent = 'data:text/csv;charset=utf-8,' + csv.join('\n');
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement('a');
            link.setAttribute('href', encodedUri);
            link.setAttribute('download', 'credit_card_data.csv');
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            addLogEntry('[Export] Credit card data exported to CSV');
        }
        
        // Generate welcome bonus plot
        function generateWelcomeBonusPlot() {
            const welcomeData = [{
                type: 'bar',
                x: ['TD Aeroplan VI', 'CIBC Aventura VI', 'Amex Gold', 'RBC Avion VI', 'Scotiabank Passport VI', 
                    'BMO World Elite', 'MBNA Rewards WE', 'Neo Card', 'SimplyCash Preferred', 'PC World Elite'],
                y: [425, 350, 500, 350, 400, 300, 250, 150, 300, 200],
                marker: {
                    color: ['#ff3366', '#33ff99', '#00ccff', '#ffcc00', '#cc99ff', 
                           '#ff9966', '#66ff66', '#ff6699', '#33ccff', '#ffff66'],
                    line: {
                        color: '#00ffff',
                        width: 1.5
                    }
                },
                text: ['$425', '$350', '$500', '$350', '$400', '$300', '$250', '$150', '$300', '$200'],
                textposition: 'auto',
                hoverinfo: 'x+text'
            }];
            
            const welcomeLayout = {
                title: 'Welcome Bonus Value by Card (First Year)',
                paper_bgcolor: 'rgba(0,0,0,0.6)',
                plot_bgcolor: 'rgba(0,0,0,0.2)',
                font: {
                    family: 'Ubuntu Mono, monospace',
                    color: '#ffffff'
                },
                xaxis: {
                    title: '',
                    tickangle: -45
                },
                yaxis: {
                    title: 'Value ($)',
                    showgrid: true,
                    gridcolor: 'rgba(0,255,255,0.1)'
                },
                margin: {
                    l: 50,
                    r: 20,
                    b: 120,
                    t: 50,
                    pad: 4
                }
            };
            
            Plotly.newPlot('welcome-bonus-plot', welcomeData, welcomeLayout);
            document.getElementById('welcome-bonus-plot').classList.add('active');
        }
        
        // Generate rewards comparison plot
        function generateRewardsComparisonPlot() {
            const categories = ['Groceries', 'Dining', 'Gas', 'Travel', 'Recurring', 'Other'];
            
            const rewardsData = [
                {
                    x: categories,
                    y: [5, 2, 2, 1, 1, 1],
                    type: 'scatter',
                    mode: 'lines+markers',
                    name: 'Amex Gold',
                    line: {
                        width: 3,
                        color: '#ffcc00'
                    },
                    marker: {
                        size: 8,
                        symbol: 'circle'
                    }
                },
                {
                    x: categories,
                    y: [3, 3, 3, 4, 1, 1],
                    type: 'scatter',
                    mode: 'lines+markers',
                    name: 'TD Aeroplan VI',
                    line: {
                        width: 3,
                        color: '#33ff99'
                    },
                    marker: {
                        size: 8,
                        symbol: 'circle'
                    }
                },
                {
                    x: categories,
                    y: [4, 4, 2, 3, 2, 1],
                    type: 'scatter',
                    mode: 'lines+markers',
                    name: 'Scotiabank Passport VI',
                    line: {
                        width: 3,
                        color: '#ff3366'
                    },
                    marker: {
                        size: 8,
                        symbol: 'circle'
                    }
                },
                {
                    x: categories,
                    y: [2, 5, 3, 2, 1, 1],
                    type: 'scatter',
                    mode: 'lines+markers',
                    name: 'CIBC Aventura VI',
                    line: {
                        width: 3,
                        color: '#00ccff'
                    },
                    marker: {
                        size: 8,
                        symbol: 'circle'
                    }
                }
            ];
            
            const rewardsLayout = {
                title: 'Reward Rate Comparison (%) by Category',
                paper_bgcolor: 'rgba(0,0,0,0.6)',
                plot_bgcolor: 'rgba(0,0,0,0.2)',
                font: {
                    family: 'Ubuntu Mono, monospace',
                    color: '#ffffff'
                },
                xaxis: {
                    title: 'Spending Category',
                    showgrid: false
                },
                yaxis: {
                    title: 'Reward Rate (%)',
                    showgrid: true,
                    gridcolor: 'rgba(0,255,255,0.1)'
                },
                legend: {
                    x: 0,
                    y: 1.1,
                    orientation: 'h'
                },
                margin: {
                    l: 50,
                    r: 20,
                    b: 50,
                    t: 50,
                    pad: 4
                }
            };
            
            Plotly.newPlot('rewards-comparison-plot', rewardsData, rewardsLayout);
            document.getElementById('rewards-comparison-plot').classList.add('active');
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Add event listeners for sliders
            document.getElementById('annual-income').addEventListener('input', function() {
                document.querySelector('output[for="annual-income"]').textContent = '$' + this.value;
            });
        });
    </script>
    
    <div class="visualization-container">
        <div id="welcome-bonus-plot" class="plot-box"></div>
        <div id="rewards-comparison-plot" class="plot-box"></div>
    </div>
                    
    <div class="data-analysis-section">
        <h4>Advanced Insights</h4>
        <div class="insights-grid">
            <div class="insight-card">
                <h5>Best Overall: TD Aeroplan Visa Infinite</h5>
                <p>Highest combined value accounting for welcome bonus, travel perks and everyday rewards.</p>
                <div class="insight-metrics">
                    <div class="metric">
                        <span class="metric-label">First Year Value</span>
                        <span class="metric-value">$947</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Annual Fee</span>
                        <span class="metric-value">$139</span>
                    </div>
                </div>
            </div>
            <div class="insight-card">
                <h5>Best No-Fee Card: Tangerine Money-Back</h5>
                <p>Highest value with no annual fee and customizable 2% categories.</p>
                <div class="insight-metrics">
                    <div class="metric">
                        <span class="metric-label">Annual Value</span>
                        <span class="metric-value">$326</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Annual Fee</span>
                        <span class="metric-value">$0</span>
                    </div>
                </div>
            </div>
            <div class="insight-card">
                <h5>Best First Year: Amex Gold Rewards</h5>
                <p>Highest first-year return factoring welcome bonus and promotional offers.</p>
                <div class="insight-metrics">
                    <div class="metric">
                        <span class="metric-label">First Year Value</span>
                        <span class="metric-value">$1,244</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Annual Fee</span>
                        <span class="metric-value">$250</span>
                    </div>
                </div>
            </div>
            <div class="insight-card">
                <h5>Best for Travel: CIBC Aventura</h5>
                <p>Best overall travel benefits including lounge access and insurance.</p>
                <div class="insight-metrics">
                    <div class="metric">
                        <span class="metric-label">Travel Value</span>
                        <span class="metric-value">$784</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Annual Fee</span>
                        <span class="metric-value">$120</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
                
    <style>
        /* Main container styles */
        .data-science-section {
            padding: 2rem;
            background-color: rgba(0, 0, 20, 0.9);
            color: #ffffff;
            font-family: 'Ubuntu Mono', monospace;
        }
        
        .project-container {
            margin-top: 2rem;
        }
        
        .data-project-card {
            background-color: rgba(0, 0, 30, 0.7);
            border: 1px solid #00ffff;
            padding: 2rem;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .data-project-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(to right, #00ffff, #ff00cc, #00ffff);
            animation: neon-border 3s infinite linear;
        }
        
        /* Scraper status panel styles */
        .scraper-status-panel {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background-color: rgba(0, 0, 0, 0.8);
            border: 1px solid #00ffff;
            padding: 10px 15px;
            margin-bottom: 20px;
            border-radius: 4px;
        }
        
        .status-indicator {
            display: flex;
            align-items: center;
        }
        
        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
            background-color: #33ff99;
            box-shadow: 0 0 10px #33ff99;
        }
        
        .status-indicator.active .status-dot {
            background-color: #33ff99;
            box-shadow: 0 0 10px #33ff99;
        }
        
        .status-indicator.running .status-dot {
            background-color: #ffcc00;
            box-shadow: 0 0 10px #ffcc00;
            animation: pulse 1.5s infinite;
        }
        
        .status-indicator.success .status-dot {
            background-color: #33ff99;
            box-shadow: 0 0 10px #33ff99;
        }
        
        .status-indicator.error .status-dot {
            background-color: #ff3366;
            box-shadow: 0 0 10px #ff3366;
        }
        
        .status-text {
            font-family: 'VT323', monospace;
            font-size: 1.1rem;
            color: #00ffff;
            text-shadow: 0 0 5px rgba(0, 255, 255, 0.7);
        }
        
        .status-controls {
            display: flex;
            gap: 8px;
        }
        
        .last-update {
            font-size: 0.8rem;
            color: #999;
        }
        
        /* Cyber button styles */
        .cyber-button {
            background-color: transparent;
            color: #00ffff;
            border: 1px solid #00ffff;
            padding: 10px 20px;
            font-family: 'VT323', monospace;
            font-size: 1.2rem;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s;
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
            margin: 10px 0;
        }
        
        .cyber-button:hover {
            background-color: rgba(0, 255, 255, 0.1);
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.5);
        }
        
        .cyber-button:active {
            transform: scale(0.98);
        }
        
        .cyber-button.small {
            padding: 8px 15px;
            font-size: 1rem;
        }
        
        .micro-button {
            background-color: transparent;
            color: #00ffff;
            border: 1px solid #00ffff;
            padding: 3px 8px;
            font-family: 'Ubuntu Mono', monospace;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .micro-button:hover {
            background-color: rgba(0, 255, 255, 0.1);
        }
        
        /* Scraper config panel styles */
        .scraper-config-panel {
            background-color: rgba(0, 0, 25, 0.7);
            border: 1px solid #00ffff;
            padding: 15px;
            margin-bottom: 20px;
            position: relative;
        }
        
        .config-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 15px;
        }
        
        .scraper-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
        }
        
        .scraper-options {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
            margin-right: 8px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.8);
            border: 1px solid #00ffff;
            transition: .4s;
            border-radius: 24px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 3px;
            background-color: #00ffff;
            transition: .4s;
            border-radius: 50%;
            box-shadow: 0 0 5px rgba(0, 255, 255, 0.7);
        }
        
        input:checked + .slider {
            background-color: rgba(0, 255, 255, 0.3);
        }
        
        input:checked + .slider:before {
            transform: translateX(26px);
        }
        
        .toggle-label {
            margin-left: 60px;
            white-space: nowrap;
            color: #00ffff;
            font-size: 0.9rem;
        }
        
        select {
            background-color: rgba(0, 0, 0, 0.8);
            border: 1px solid #00ffff;
            color: #fff;
            padding: 5px 10px;
            font-family: 'Ubuntu Mono', monospace;
            appearance: none;
        }
        
        /* Scraper log styles */
        .scraper-log {
            background-color: rgba(0, 0, 0, 0.8);
            border: 1px solid #00ffff;
            height: 120px;
            margin: 20px 0;
            overflow: hidden;
            transition: height 0.3s ease;
        }
        
        .scraper-log.expanded {
            height: 300px;
        }
        
        .log-header {
            display: flex;
            justify-content: space-between;
            background-color: rgba(0, 255, 255, 0.1);
            padding: 5px 10px;
            font-family: 'VT323', monospace;
            color: #00ffff;
        }
        
        .log-content {
            padding: 10px;
            height: calc(100% - 30px);
            overflow-y: auto;
            font-family: 'Ubuntu Mono', monospace;
            font-size: 0.9rem;
            color: #cccccc;
        }
        
        .log-entry {
            margin-bottom: 5px;
            line-height: 1.3;
        }
        
        /* Feature list styles */
        .feature-list {
            margin-bottom: 20px;
        }
        
        .feature-list ul {
            list-style-type: none;
            padding: 0;
        }
        
        .feature-list li {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        .feature-list i {
            margin-right: 10px;
            color: #00ffff;
            font-size: 1.2rem;
            width: 20px;
            text-align: center;
        }
        
        /* Source and data toggles */
        .source-toggles, .data-toggles {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
        }
        
        .source-toggles div, .data-toggles div {
            display: flex;
            align-items: center;
        }
        
        .source-toggles input[type="checkbox"], 
        .data-toggles input[type="checkbox"] {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid #00ffff;
            display: inline-block;
            position: relative;
            margin-right: 8px;
            vertical-align: middle;
        }
        
        .source-toggles input[type="checkbox"]:checked::after,
        .data-toggles input[type="checkbox"]:checked::after {
            content: '';
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #33ff99;
            top: 2px;
            left: 2px;
            box-shadow: 0 0 5px #33ff99;
        }
        
        /* Plot box styles */
        .visualization-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 25px 0;
        }
        
        .plot-box {
            height: 300px;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            background-color: rgba(0, 0, 0, 0.6);
            border: 1px solid #00ffff;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.5);
        }
        
        .plot-box.active {
            opacity: 1;
        }
        
        /* Data analysis section */
        .data-analysis-section {
            margin-top: 30px;
        }
        
        .insights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .insight-card {
            background-color: rgba(0, 0, 25, 0.7);
            border: 1px solid #00ffff;
            padding: 15px;
            position: relative;
        }
        
        .insight-card h5 {
            margin-top: 0;
            margin-bottom: 10px;
            color: #33ff99;
            font-size: 1rem;
        }
        
        .insight-card p {
            font-size: 0.9rem;
            margin-bottom: 15px;
        }
        
        .insight-metrics {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            border-top: 1px solid rgba(0, 255, 255, 0.3);
            padding-top: 10px;
        }
        
        .metric {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .metric-label {
            font-size: 0.8rem;
            color: #999;
            margin-bottom: 3px;
        }
        
        .metric-value {
            font-size: 1.1rem;
            color: #00ffff;
            font-weight: bold;
        }
        
        /* Animations */
        @keyframes neon-border {
            0% { background-position: 0% 50%; }
            100% { background-position: 100% 50%; }
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        @keyframes glitch {
            0% { opacity: 1; transform: translateX(0); }
            25% { opacity: 0.8; transform: translateX(-5px); }
            50% { opacity: 0.9; transform: translateX(5px); }
            75% { opacity: 0.8; transform: translateX(-2px); }
            100% { opacity: 1; transform: translateX(0); }
        }
        
        /* Global styles */
        .cyber-subtitle {
            text-align: center;
            color: #ff3366;
            font-size: 1.2rem;
            margin-top: -15px;
            margin-bottom: 30px;
        }
        
        .glitch {
            position: relative;
            font-size: 2.5rem;
            font-weight: bold;
            color: #ffffff;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 1rem;
        }
        
        .glitch::before,
        .glitch::after {
            content: attr(data-text);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.8;
        }
        
        /* Scraped data table styles */
        .scraped-data-container {
            display: none;
            background-color: rgba(0, 0, 25, 0.9);
            border: 2px solid #00ffff;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
            margin: 25px 0;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out;
            position: relative;
        }
        
        .scraped-data-container.visible {
            display: block;
            max-height: 600px;
        }
        
        .data-table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: rgba(0, 255, 255, 0.1);
            padding: 10px 15px;
            border-bottom: 1px solid #00ffff;
        }
        
        .data-table-header h4 {
            margin: 0;
            color: #00ffff;
            font-family: 'VT323', monospace;
            font-size: 1.2rem;
        }
        
        .table-controls {
            display: flex;
            gap: 10px;
        }
        
        .data-table-wrapper {
            overflow-x: auto;
            max-height: 500px;
            padding: 10px;
        }
        
        .scraped-data-table {
            width: 100%;
            border-collapse: collapse;
            font-family: 'Ubuntu Mono', monospace;
            color: #ffffff;
            border: 1px solid rgba(0, 255, 255, 0.3);
        }
        
        .scraped-data-table thead {
            position: sticky;
            top: 0;
            background-color: rgba(0, 0, 30, 0.9);
            z-index: 10;
        }
        
        .scraped-data-table th {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 2px solid #00ffff;
            color: #33ff99;
            font-weight: bold;
            position: relative;
        }
        
        .scraped-data-table th::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(to right, #00ffff, #ff00cc);
            animation: neon-border 3s infinite linear;
        }
        
        .scraped-data-table td {
            padding: 10px 15px;
            border-bottom: 1px solid rgba(0, 255, 255, 0.2);
            transition: background-color 0.2s;
        }
        
        .scraped-data-table tbody tr {
            background-color: rgba(0, 0, 20, 0.5);
            opacity: 0;
            animation: fadeIn 0.5s forwards;
        }
        
        .scraped-data-table tbody tr:nth-child(even) {
            background-color: rgba(0, 0, 40, 0.5);
        }
        
        .scraped-data-table tbody tr:hover {
            background-color: rgba(0, 255, 255, 0.1);
        }
        
        .cell-glitch {
            animation: cellGlitch 0.5s;
            color: #ff3366;
            text-shadow: 0 0 5px #ff3366;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes cellGlitch {
            0% { transform: translateX(0); }
            20% { transform: translateX(-2px); color: #00ffff; }
            40% { transform: translateX(2px); color: #ff3366; }
            60% { transform: translateX(-1px); color: #33ff99; }
            80% { transform: translateX(1px); color: #ffcc00; }
            100% { transform: translateX(0); }
        }
    </style>
</body>
</html>